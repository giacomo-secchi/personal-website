{"version":3,"file":"js/main.js","mappings":"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","sources":["webpack://personal-theme/./resources/js/main.js"],"sourcesContent":["( () => {\n    'use strict'\n\n    document.querySelectorAll( '.wp-block-read-more' ).forEach( button => {\n        button.addEventListener( 'click', async ( e ) => {\n            e.preventDefault();\n\n            const popupContainer = document.querySelector( '.popup' );\n            const popupContent = document.querySelector( '.popup-content' );\n\n\n            openPopup();\n\n            popupContent.innerHTML = `<div class=\"loading-message\"> ${wp.i18n.__('Loadingâ€¦', 'portfolio')}</div>`;\n\n             try {\n                // Fetch the project data from the REST API.\n                const response = await wp.apiFetch({\n                    path: `/wp/v2/jetpack-portfolio/${button.dataset.projectId}?_fields=title,content,slug`,\n                    method: 'GET'\n                });\n\n\n                // Update the URL in the browser without reloading the page.\n                history.pushState({ project: response.slug }, '', button.href );\n\n\n                popupContent.innerHTML= `<h2 id=\"popup-title\">${response.title.rendered}</h2>\n                    <div class=\"entry-content\">${response.content.rendered}</div>`;\n\n                popupContainer.setAttribute( 'aria-hidden', 'false' );\n            } catch ( error ) {\n\n                popupContent.innerHTML = `\n                <p class=\"has-text-align-center\">\n                    ${wp.i18n.__('Errore di caricamento', 'portfolio')}\n                </p>`;\n                console.error('Error fetching project:', error);\n\n            }\n\n            // Close the popup when clicking outside of it.\n            popupContainer.addEventListener('click', function( e ) {\n                if ( e.target.closest( '.popup-close' ) || e.target === popupContainer ) {\n                    closePopup();\n                }\n            });\n        });\n    });\n\n\n    window.addEventListener( 'popstate', function(e) {\n        // Se torniamo alla pagina portfolio (senza slug progetto), chiudi il popup\n        if (!window.location.pathname.includes('/portfolio/')) {\n           closePopup(); // Chiudi il popup\n        }\n        // Altrimenti, gestisci il \"forward\" (es: se l'utente clicca AVANTI)\n        else if (e.state && e.state.project) {\n\n           openPopup(e.state.project); // Riapri il popup con il progetto corretto\n        }\n    } );\n\n    function closePopup() {\n        const popupContainer = document.querySelector( '.popup' );\n        const popupContent = popupContainer.querySelector('.popup-content');\n\n        if ( popupContent ) {\n            // Reset popup content.\n            popupContent.innerHTML = '';\n            // Reset scroll position.\n            popupContainer.scrollTop = 0;\n        }\n\n        popupContainer.setAttribute('aria-hidden', 'true');\n        document.body.classList.remove('overflow-hidden', 'layer-open');\n        popupContainer.classList.add('d-none');\n        history.replaceState( null, '', '/portfolio/' );\n    }\n\n    function openPopup( ) {\n        const popupContainer = document.querySelector( '.popup' );\n\n        document.body.classList.add( 'overflow-hidden', 'layer-open' );\n        popupContainer.classList.remove( 'd-none' );\n    }\n\n\n} )();\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"],"names":["document","querySelectorAll","forEach","button","addEventListener","e","preventDefault","popupContainer","querySelector","popupContent","openPopup","innerHTML","wp","i18n","__","response","apiFetch","path","dataset","projectId","method","history","pushState","project","slug","href","title","rendered","content","setAttribute","error","console","target","closest","closePopup","window","location","pathname","includes","state","scrollTop","body","classList","remove","add","replaceState"],"ignoreList":[],"sourceRoot":""}